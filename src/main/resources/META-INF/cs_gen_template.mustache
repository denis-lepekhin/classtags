package pectin.classtags.codegen;

import static com.google.common.base.Objects.firstNonNull;
import static com.google.common.collect.Sets.intersection;

import java.util.Collections;
import java.util.Set;

import com.google.common.collect.ImmutableMap;
import com.google.common.collect.ImmutableSet;
import pectin.classtags.AbstractClassSetResolver;

/**
 * generated by scanning @ClassTags;
 */
public class ClassSetResolverImpl extends AbstractClassSetResolver {
    
    
    private final ImmutableMap<String, Set<? extends Class<?>>> tags2Classes = ImmutableMap.<String, Set<? extends Class<?>>>builder()
     		{{#tags}}
            .put("{{tag}}", ImmutableSet.<Class<?{{#upper}} extends {{head}}{{/upper}}>>builder()
            	{{#klasses}}
                    .add({{.}}.class)
                {{/klasses}}   
                    .build())
            {{/tags}}
            .build();
    
    @SuppressWarnings("unchecked") public Set<Class<?>> getClassesByTag(String tag) {
        return firstNonNull((Set<Class<?>>)tags2Classes.get(tag), Collections.<Class<?>>emptySet());
    }
}